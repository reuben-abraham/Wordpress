"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}jQuery(window).on("elementor:init",function(){var r=window.analog=window.analog||{},t=elementor.settings.page.model.attributes;function l(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n)}r.style_kit_updated=!1,r.sk_modal_shown=!1,ANG_Action.skPanelsAllowed||jQuery("head").append('<style id="sk-panels-allowed">.elementor-panel [class*="elementor-control-ang_"], .elementor-panel [class*="elementor-control-description_ang_"] {display:none;}</style>'),elementor.channels.editor.on("status:change",function(){var e=jQuery('button[data-action="update_token"]');"disabled"===e.attr("disabled")&&e.attr("disabled",!1)});var i=function(e){return!(e.startsWith("ang_action")||e.startsWith("post")||e.startsWith("preview")||e.startsWith("template")||e.startsWith("background_image"))&&(e in elementor.settings.page.model.controls||(e.startsWith("ang_")||e.startsWith("background")||e.startsWith("hide")))};r.redirectToSection=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"style",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"ang_style_settings",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"page_settings";if(elementor.helpers.compareVersions(ElementorConfig.version,"2.7.0","<")){var o=elementor.panel.currentView;o.setPage(n),o.getCurrentPageView().activateTab(e),o.getCurrentPageView().activateSection(t),o.getCurrentPageView().render()}else $e.route("panel/page-settings/".concat(e)),elementor.getPanelView().getCurrentPageView().activateSection(t)._renderChildren()},r.showStyleKitAttentionDialog=function(){var e=new elementorModules.editor.utils.Introduction({introductionKey:"angStylekit",dialogType:"confirm",dialogOptions:{id:"ang-stylekit-attention-dialog",headerMessage:ANG_Action.translate.sk_header,message:ANG_Action.translate.sk_message,position:{my:"center center",at:"center center"},strings:{confirm:ANG_Action.translate.sk_learn,cancel:elementor.translate("got_it")},hide:{onButtonClick:!1},onCancel:function(){e.setViewed(),e.getDialog().hide()},onConfirm:function(){e.setViewed(),e.getDialog().hide(),r.redirectToSection()}}});e.show()},r.styleKitUpdateDialog=function(){var e=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-stylekit-update",headerMessage:ANG_Action.translate.skUpdate,message:ANG_Action.translate.skUpdateDesc,hide:{onOutsideClick:!1,onBackgroundClick:!1,onEscKeyPress:!1}});return e.addButton({name:"ang_discard",text:ANG_Action.translate.discard,callback:function(){r.removeFromQueue(),elementor.settings.page.model.set("ang_action_tokens","-1")}}),e.addButton({name:"ang_apply",text:ANG_Action.translate.apply,callback:function(){r.removeFromQueue(),r.applyStyleKit(t.ang_action_tokens)}}),e},r.hasGlobalKit=function(){var e=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-has-globalkit",headerMessage:ANG_Action.translate.pageStyleHeader,message:ANG_Action.translate.pageStyleDesc,hide:{onOutsideClick:!1,onBackgroundClick:!1,onEscKeyPress:!1}});e.addButton({name:"ang_discard",text:ANG_Action.translate.discard,callback:function(){elementor.settings.page.model.set("uses_style_kit",!1),elementor.saver.defaultSave()}}),e.addButton({name:"ang_apply",text:ANG_Action.translate.gotoPageStyle,callback:function(){elementor.settings.page.model.set("uses_style_kit",!1),r.redirectToSection(),elementor.saver.defaultSave()}}),e.show()},elementor.settings.page.getSettings().settings.uses_style_kit&&r.hasGlobalKit(),r.StyleKitUpdateModal=r.styleKitUpdateDialog(),r.resetStyles=function(){var e=elementor.settings.page.model.attributes,a={};_.map(e,function(e,t){if(i(t)&&void 0!==elementor.settings.page.model.controls[t])switch(_typeof(elementor.settings.page.model.controls[t].default)){case"string":a[t]="";break;case"boolean":a[t]=!1;break;case"object":var n=elementor.settings.page.model.controls[t].type,o="";"slider"===n&&(o={size:"",sizes:[],unit:"em"}),"dimensions"===n&&(o={unit:"px",top:"",right:"",bottom:"",left:"",isLinked:!0}),a[t]=o;break;default:a[t]=elementor.settings.page.model.controls[t].default}}),elementor.settings.page.model.set(a),elementor.settings.page.model.set("ang_action_tokens",""),r.redirectToSection()},r.applyStyleKit=function(e){e&&""!==e?wp.apiFetch({method:"post",path:"agwp/v1/tokens/get",data:{id:e}}).then(function(e){var t=JSON.parse(e.data);Object.keys(t).length&&(elementor.settings.page.model.set(t),elementor.settings.page.model.set("ang_recently_imported","no"))}).catch(function(e){console.error(e),elementor.settings.page.model.set("ang_action_tokens","")}):console.warn("No value provided.",e)},r.removeFromQueue=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:elementor.config.document.id;jQuery.ajax({type:"POST",url:AGWP.ajaxurl,data:{action:"ang_remove_kit_queue",id:e},success:function(e){e.success||elementorCommon.dialogsManager.createWidget("alert",{message:e.data.message}).show()},dataType:"JSON"})},elementor.on("preview:loaded",function(){elementor.config.user.introduction.angStylekit||r.showStyleKitAttentionDialog();var e=elementor.settings.page.model.attributes;e.ang_action_tokens&&"-1"!==e.ang_action_tokens&&r.applyStyleKit(e.ang_action_tokens)});var n=elementor.modules.controls.BaseData,e=n.extend({initialize:function(e){n.prototype.initialize.apply(this,arguments),elementor.helpers.compareVersions(ElementorConfig.version,"2.8.0","<")?this.settingsModel=e.elementSettingsModel:this.settingsModel=e.container.model,"update_token"===this.model.get("action")&&this.listenTo(this.settingsModel,"change",this.toggleControlVisibility)},toggleControlVisibility:function(){"update_token"===this.model.get("action")&&(this.$el.find("button").attr("disabled",!0),Object.keys(elementor.settings.page.model.changed).length&&this.$el.find("button").attr("disabled",!1))},ui:function(){var e=n.prototype.ui.apply(this,arguments);return _.extend(e,{actionButton:"button"}),e},events:function(){var e=n.prototype.events.apply(this,arguments);return e["click @ui.actionButton"]="onChangeEvent",e},performAction:function(e){return this[{export_css:"handleCSSExport",reset_css:"handleCSSReset",save_token:"handleSaveToken",update_token:"handleTokenUpdate"}[e]]()},onChangeEvent:function(e){var t=e.currentTarget,n=jQuery(t).data("action");this.performAction(n)},handleCSSExport:function(){var e=elementor.settings.page.getControlsCSS().elements.$stylesheetElement[0].textContent,t=elementor.settings.page.model.get("custom_css"),n=e.replace(t,""),s=cssbeautify(n,{indent:"  ",openbrace:"end-of-line",autosemicolon:!0}),o=function(e){var t=e.target.checked,n="body.elementor-page-".concat(elementor.config.document.id),o="body.elementor-page",a=jQuery("#ang-export-css");if(t){var r=l(s,n+" ",o+" ");r=l(r=l(r,n+":",o+":"),n+",",o+","),jQuery(a).html(r)}else{var i=l(s,o+" ",n+" ");i=l(i=l(i,o+":",n+":"),o+",",n+","),jQuery(a).html(i)}},a=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-modal-export-css",headerMessage:ANG_Action.translate.exportCSS,message:"",position:{my:"center",at:"center"},onReady:function(){this.addButton({name:"cancel",text:elementor.translate("cancel"),callback:function(){a.destroy()}}),this.addButton({name:"ok",text:ANG_Action.translate.copyCSS,callback:function(){var e=a.getElements("content");jQuery(e.find("textarea")).select(),document.execCommand("copy")}})},onShow:function(){a.getElements("content").append('\n\t\t\t\t\t\t<textarea id="ang-export-css" rows="10">'.concat(s,'</textarea>\n\t\t\t\t\t\t<div style="text-align:left;">\n\t\t\t\t\t\t\t<input type="checkbox" id="ang-switch-selector" />\n\t\t\t\t\t\t\t<label for="ang-switch-selector">').concat(ANG_Action.translate.cssSelector,"</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t")),jQuery("#ang-switch-selector").bind("change",o)},onHide:function(){setTimeout(function(){a.destroy()},200)}});a.getElements("message").append(a.addElement("content")),a.show(),jQuery(window).resize()},handleCSSReset:function(){elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.resetMessage,headerMessage:ANG_Action.translate.resetHeader,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:r.resetStyles}).show()},handleSaveToken:function(){var e=elementor.settings.page.model.attributes,n={};elementor.saver.defaultSave(),_.map(e,function(e,t){i(t)&&(n[t]=e)});var o=elementorCommon.dialogsManager.createWidget("lightbox",{id:"ang-modal-save-token",headerMessage:ANG_Action.translate.saveToken,message:"",position:{my:"center",at:"center"},onReady:function(){this.addButton({name:"cancel",text:ANG_Action.translate.cancel,callback:function(){o.destroy()}}),this.addButton({name:"ok",text:ANG_Action.translate.saveToken2,callback:function(e){var t=e.getElements("content").find("#ang_token_title").val();t&&wp.apiFetch({url:ANG_Action.saveToken,method:"post",data:{id:elementor.config.post_id,title:t,tokens:JSON.stringify(n)}}).then(function(e){elementor.settings.page.model.controls.ang_action_tokens.options[e.id]=t,elementor.reloadPreview(),setTimeout(function(){o.destroy(),elementor.settings.page.model.set("ang_action_tokens",e.id),r.redirectToSection()},2e3)}).catch(function(e){console.error(e.message)})}})},onShow:function(){o.getElements("content").append('<input id="ang_token_title" type="text" value="" placeholder="'.concat(ANG_Action.translate.enterTitle,'" />'))}});o.getElements("message").append(o.addElement("content")),o.show(),jQuery(window).resize()},handleTokenUpdate:function(){var e=elementor.settings.page.model.attributes.ang_action_tokens,t=elementor.config.post_id,n=elementor.settings.page.model.attributes,o={};elementor.saver.defaultSave(),_.map(n,function(e,t){i(t)&&(o[t]=e)});var a=elementorCommon.dialogsManager.createWidget("confirm",{message:ANG_Action.translate.updateMessage,headerMessage:ANG_Action.translate.updateKit,strings:{confirm:elementor.translate("yes"),cancel:elementor.translate("cancel")},defaultOption:"cancel",onConfirm:function(){wp.apiFetch({path:"agwp/v1/tokens/update",method:"post",data:{id:e,current_id:t,tokens:JSON.stringify(o)}}).then(function(){elementor.notifications.showToast({message:ANG_Action.translate.tokenUpdated}),r.style_kit_updated=!0,r.removeFromQueue()}).catch(function(e){return console.error(e)})}});a.getElements("message").append(a.addElement("content")),a.show()}});elementor.addControlView("ang_action",e),elementor.settings.page.addChangeCallback("ang_action_tokens",function(e){r.applyStyleKit(e)}),jQuery(document).on("heartbeat-tick",function(e,t){var n=elementor.config.document.id,o=t.sk_posts;o&&0<=o.indexOf(n)&&(r.sk_modal_shown||(r.sk_modal_shown=!0,r.StyleKitUpdateModal.show(),setTimeout(function(){r.sk_modal_shown=!1},6e4)))}),jQuery(document).on("heartbeat-send",function(e,t){var n=elementor.settings.page.model.attributes.ang_action_tokens;n&&(t.ang_sk_post={post_id:elementor.config.document.id,kit_id:n,updated:r.style_kit_updated},r.style_kit_updated=!1)}),r.insertColors=function(){var e=elementor.settings.page.model.attributes,t=[e.ang_color_accent_primary,e.ang_color_accent_secondary,e.ang_color_text_light,e.ang_color_text_dark,e.ang_color_background_light,e.ang_color_background_dark].concat(_toConsumableArray(ANG_Action.palette)),o=jQuery.unique(t.filter(function(e){return""!==e}));jQuery.a8c&&jQuery.a8c.iris&&o.length&&(jQuery.a8c.iris.prototype._addPalettes=function(){var n=this.picker.children(".iris-palette-container");n.length||(n=jQuery('<div class="iris-palette-container"/>').appendTo(this.picker));var e=o;jQuery.each(e,function(e,t){jQuery('<a class="iris-palette" tabindex="0"/>').data("color",t).css("backgroundColor",t).appendTo(n)}),this.picker.append(n)})},r.updateColorPicker=function(){var n=jQuery(".iris-palette-container");n.empty();var e=elementor.settings.page.model.attributes,t=[e.ang_color_accent_primary,e.ang_color_accent_secondary,e.ang_color_text_light,e.ang_color_text_dark,e.ang_color_background_light,e.ang_color_background_dark].concat(_toConsumableArray(ANG_Action.palette)),o=jQuery.unique(t.filter(function(e){return""!==e}));jQuery.each(o,function(e,t){jQuery('<a class="iris-palette" tabindex="0"/>').data("color",t).css("backgroundColor",t).css({width:"19.2452px",height:"19.2452px","margin-right":"3.5805px"}).appendTo(n)})},!0===Boolean(AGWP.syncColors)&&(elementor.on("preview:loaded",function(){r.insertColors(),elementor.helpers.compareVersions(ElementorConfig.version,"2.7.6",">")&&jQuery("body").toggleClass("dark-mode","dark"===elementor.settings.editorPreferences.model.attributes.ui_theme)}),elementor.settings.page.addChangeCallback("ang_color_accent_primary",r.updateColorPicker),elementor.settings.page.addChangeCallback("ang_color_accent_secondary",r.updateColorPicker),elementor.settings.page.addChangeCallback("ang_color_text_light",r.updateColorPicker),elementor.settings.page.addChangeCallback("ang_color_text_dark",r.updateColorPicker),elementor.settings.page.addChangeCallback("ang_color_background_light",r.updateColorPicker),elementor.settings.page.addChangeCallback("ang_color_background_dark",r.updateColorPicker)),jQuery("#elementor-panel").on("change",'[data-setting="ui_theme"]',function(e){var t=e.target.value;jQuery("body").toggleClass("dark-mode","dark"===t)})});